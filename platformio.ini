; PlatformIO Project Configuration File
; Hydroponics Monitoring and Control System
;
; Build options: build flags, source filter
; Upload options: custom upload port, speed and extra flags
; Library options: dependencies, extra library storages
; Advanced options: extra scripting

[platformio]
default_envs = mega2560
src_dir = src
include_dir = src

[env]
framework = arduino
monitor_speed = 115200
lib_deps =
    paulstoffregen/OneWire@^2.3.7
    milesburton/DallasTemperature@^3.11.0
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    arduino-libraries/SD@^1.3.0

build_flags =
    -Wall

; Arduino Mega 2560 (Recommended - more analog pins and memory)
[env:mega2560]
platform = atmelavr
board = megaatmega2560
upload_speed = 115200

; Arduino Uno (Limited pins, for basic testing)
[env:uno]
platform = atmelavr
board = uno
build_flags =
    ${env.build_flags}
    -DUSE_MINIMAL_PINS

; ESP32 (For WiFi connectivity)
[env:esp32]
platform = espressif32
board = esp32dev
build_flags =
    ${env.build_flags}
    -DESP32
lib_deps =
    ${env.lib_deps}
    WiFi
    ESPAsyncWebServer-esphome

; ESP8266 (Budget WiFi option)
[env:esp8266]
platform = espressif8266
board = nodemcuv2
build_flags =
    ${env.build_flags}
    -DESP8266

; Native build for testing (no Arduino)
[env:native]
platform = native
build_flags =
    -std=c++14
    -Wall
    -Wextra
lib_deps =
test_build_src = true

; Test environment
[env:test]
platform = native
build_type = test
test_framework = googletest
build_flags =
    -std=c++14
    -g
    -O0
    --coverage
lib_deps =
    google/googletest@^1.14.0
